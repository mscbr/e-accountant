(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{211:function(e,t,a){},424:function(e,t,a){e.exports=a(758)},758:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(50),i=a.n(l),s=(a(211),a(3)),c=a(4),o=a(7),u=a(5),d=a(6),m=a(762),h=a(764),p=a(759),f=a(435),E=a(761),g=a(9),b=a(16),v=Object(g.b)(null,function(e){return{signOut:function(){return e(function(e,t,a){(0,a.getFirebase)().auth().signOut().then(function(){e({type:"SIGNOUT_SUCCESS"})})})}}})(function(e){return r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(E.a,{to:"/accpanel"},"Kokpit")),r.a.createElement("li",null,r.a.createElement(E.a,{to:"/clients"},"Klienci")),r.a.createElement("li",null,r.a.createElement(E.a,{to:"/newsettlement"},"Nowe Rozliczenie")),r.a.createElement("li",null,r.a.createElement("a",{onClick:e.signOut},"Wyloguj")),r.a.createElement("li",null,r.a.createElement(E.a,{to:"/",className:"btn btn-floating red lighten-2"},e.profile.initials)))}),y=Object(g.b)(function(e){return{auth:e.firebase.auth}},function(e){return{signOut:function(){return e(function(e,t,a){(0,a.getFirebase)().auth().signOut().then(function(){e({type:"SIGNOUT_SUCCESS"})})})}}})(function(e){return r.a.createElement("ul",{className:"right"},r.a.createElement("li",null,r.a.createElement(E.a,{to:"/dashboard"},"Kokpit")),r.a.createElement("li",null,r.a.createElement(E.a,{to:"/newdocument"},"Nowy Dokument")),r.a.createElement("li",null,r.a.createElement("a",{onClick:e.signOut},"Wyloguj")),r.a.createElement("li",null,r.a.createElement(E.a,{to:"/accountdetails/"+e.auth.uid,className:"btn btn-floating blue lighten-2"},e.profile.initials)))}),N=a(17),O=a(24),j=a(11),T=a(763),x=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(j.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.signUp(a.state)},a.disableSubmit=function(){return Object.values(a.state).some(function(e){return e.length<1})},a.state={email:"",password:"",clientName:"",adress:"",legalForm:"",nip:"",regon:"",phoneNumber:"",accountant:"false"},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.authError;return t.uid?r.a.createElement(T.a,{to:"/dashboard"}):r.a.createElement("div",{id:"signup-form"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white form-sign"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Rejestracja"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Has\u0142o"),r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"clientName"},"Imi\u0119"),r.a.createElement("input",{type:"text",id:"clientName",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"adress"},"Adres"),r.a.createElement("textarea",{id:"adress",className:"materialize-textarea",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"legalForm"},"Forma prawna (sp. z.o.o., sp. jawna...)"),r.a.createElement("input",{type:"text",id:"legalForm",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"nip"},"NIP"),r.a.createElement("input",{type:"number",id:"nip",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"regon"},"REGON"),r.a.createElement("input",{type:"number",id:"regon",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"phoneNumber"},"Numer telefonu"),r.a.createElement("input",{type:"text",id:"phoneNumber",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("select",{className:"browser-default",name:"accountant",id:"accountant",onChange:this.handleChange,value:this.state.accountant},r.a.createElement("option",{value:"false",defaultValue:!0},"Klient"),r.a.createElement("option",{value:"true",disabled:!0},"Ksi\u0119gowy"))),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{type:"submit",disabled:this.disableSubmit(),className:"btn red lighten-1 z-depth-0"},"Zarejestruj"),r.a.createElement("div",{className:"red-text center"},a?r.a.createElement("p",null,a," "):null))))}}]),t}(n.Component),C=Object(g.b)(function(e){return{auth:e.firebase.auth,authError:e.auth.authError}},function(e){return{signUp:function(t){return e(function(e){return function(t,a,n){var r=n.getFirebase,l=n.getFirestore,i=r(),s=l();i.auth().createUserWithEmailAndPassword(e.email,e.password).then(function(t){return s.collection("users").doc(t.user.uid).set({clientName:e.clientName,initials:e.clientName.slice(0,3),adress:e.adress,legalForm:e.legalForm,nip:e.nip,regon:e.regon,phoneNumber:e.phoneNumber,email:e.email,isAcc:"true"===e.accountant})}).then(function(){t({type:"SIGNUP_SUCCESS"})}).catch(function(e){t({type:"SIGNUP_ERROR",err:e})})}}(t))}}})(x),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.state={open:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("li",null,r.a.createElement(N.a,{onClick:this.handleOpen,className:e.button,disableRipple:!0},"Rejestracja"),r.a.createElement(N.b,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",className:e.dialog,maxWidth:"xl"},r.a.createElement(C,{closeDialog:this.handleClose})))}}]),t}(n.Component),w=Object(O.withStyles)(function(e){return{button:{height:"60px",marginTop:"-3px",padding:"0 15px",transition:"background-color .3s","&:hover":{backgroundColor:"rgba(0,0,0,0.1)"},"&:focus":{backgroundColor:"rgba(64, 70, 84, 0.88)"}},dialog:{width:"auto"}}})(k),S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(j.a)({},e.target.id,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.signIn(a.state)},a.state={email:"",password:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.authError;return e.auth.uid?r.a.createElement(T.a,{to:"/dashboard"}):r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white form-sign"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Dane"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"password"},"Haslo"),r.a.createElement("input",{type:"password",id:"password",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn red lighten-1 z-depth-0"},"Zaloguj"),r.a.createElement("div",{className:"red-text center"},t?r.a.createElement("p",null,t):null))))}}]),t}(n.Component),R=Object(g.b)(function(e){return{authError:e.auth.authError,auth:e.firebase.auth}},function(e){return{signIn:function(t){return e((a=t,function(e,t,n){(0,n.getFirebase)().auth().signInWithEmailAndPassword(a.email,a.password).then(function(){e({type:"LOGIN_SUCCESS"})}).catch(function(t){e({type:"LOGIN_ERROR",err:t})})}));var a}}})(S),D=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.state={open:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("li",null,r.a.createElement(N.a,{onClick:this.handleOpen,className:e.button,disableRipple:!0},"Zaloguj"),r.a.createElement(N.b,{className:e.dialog,open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",maxWidth:"xl"},r.a.createElement(R,{closeDialog:this.handleClose})))}}]),t}(n.Component),P=Object(g.b)(function(e){return{}})(Object(O.withStyles)(function(e){return{button:{height:"60px",marginTop:"-3px",padding:0,transition:"background-color .3s","&:hover":{backgroundColor:"rgba(0,0,0,0.1)"},"&:focus":{backgroundColor:"rgba(64, 70, 84, 0.88)"}},dialog:{}}})(D)),I=function(){return r.a.createElement("ul",{className:"right"},r.a.createElement(w,null),r.a.createElement(P,null))},F=Object(g.b)(function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}})(function(e){var t=e.auth,a=e.profile,n=t.uid?a.isAcc?r.a.createElement(v,{profile:a}):r.a.createElement(y,{profile:a}):r.a.createElement(I,null);return r.a.createElement("nav",{className:"nav-wrapper  nav-bar"},r.a.createElement("div",{className:"container"},r.a.createElement(f.a,{to:"/dashboard",className:"brand-logo white-text hide-on-med-and-down"},"E-Accountant"),n))}),A=a(14),z=a(13),U=a(45),_=a.n(U),M=function(e){var t=e.invoice;return r.a.createElement("div",{className:"card z-depth-1 project-summary"},r.a.createElement("div",{className:"card-content grey-text text-darken-3"},r.a.createElement("span",{className:"card-title"},t.title),r.a.createElement("p",null,"Opublikowane przez ",t.clientName),r.a.createElement("p",{className:"grey-text text-darken-1"},"Typ: ",r.a.createElement("span",{className:"red-text text-lighten-1"},t.docType," invoice ")),r.a.createElement("p",{className:"grey-text text-darken-1"},"Rozliczone: ",r.a.createElement("span",{className:"black-text text-lighten-1"},t.settled?r.a.createElement("i",{className:"tiny material-icons"},"check"):r.a.createElement("i",{className:"tiny material-icons"},"clear"))),r.a.createElement("p",{className:"grey-text"},_()(t.createdAt.toDate()).calendar())))},L={display:"flex"},Y={display:"initial"},Z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleSort=function(e,t){var a=[];switch(t){case"newest":a=e.slice().sort(function(e,t){return new Date(t.createdAt.toDate())-new Date(e.createdAt.toDate())});break;case"oldest":a=e.slice().sort(function(e,t){return new Date(e.createdAt.toDate())-new Date(t.createdAt.toDate())})}return a},a.handleFilter=function(e,t){var a=[];switch(t){case"pick":a=e.slice();break;case"sale":case"expence":case"other":a=e.filter(function(e){return e.docType===t});break;default:a=e.filter(function(e){return e.issuePeriod===t})}return a},a.handleChange=function(e){var t;a.setState((t={},Object(j.a)(t,e.target.id,e.target.value),Object(j.a)(t,"currentPage",0),t))},a.handleFilterType=function(e,t){switch(e){case"none":return"pick"!==a.state.filterTarget&&a.setState({filterTarget:"pick"}),r.a.createElement("select",{name:"filterTarget",id:"filterTarget",value:a.state.filterTarget,style:Y,onChange:a.handleChange},r.a.createElement("option",{value:"pick",default:!0},"--"));case"type":return r.a.createElement("select",{name:"filterTarget",id:"filterTarget",value:a.state.filterTarget,style:Y,onChange:a.handleChange},r.a.createElement("option",{value:"pick"},"WSZYSTKIE"),r.a.createElement("option",{value:"sale"},"SPRZEDA\u017b"),r.a.createElement("option",{value:"expence"},"WYDATEK"),r.a.createElement("option",{value:"other"},"INNE"));case"period":var n=[];return t.map(function(e){n.includes(e.issuePeriod)||n.push(e.issuePeriod)}),r.a.createElement("select",{name:"filterTarget",id:"filterTarget",value:a.state.filterTarget,style:Y,onChange:a.handleChange},r.a.createElement("option",{value:"pick"},"WSZYSTKIE"),n.map(function(e){return r.a.createElement("option",{value:e,key:e},e)}));default:return r.a.createElement("select",{name:"filterTarget",id:"filterTarget",value:a.state.filterType,style:Y,onChange:a.handleChange})}},a.handlePagination=function(e,t){var a=[];if(!(e.length>5))return a=e.slice();for(var n=e.slice(),r=0;r<n.length+1;r++)a.push(n.splice(0,5));return a[t]},a.handlePageButtons=function(e){var t=Math.ceil(e.length/5);if(t&&e.length>5){for(var n=[],l=function(e){n.push(r.a.createElement("li",{key:e+"pageLink"},r.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),a.setState({currentPage:e})},style:e===a.state.currentPage?{color:"red"}:{color:"black"}},e+1)))},i=0;i<t;i++)l(i);return n}return!1},a.state={sortType:"newest",filterType:"none",filterTarget:"pick",currentPage:0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.handleSort(this.props.invoices,this.state.sortType),t=this.handleFilterType(this.state.filterType,e),a=this.handleFilter(e,this.state.filterTarget),n=this.handlePagination(a,this.state.currentPage),l=this.handlePageButtons(e);return r.a.createElement("div",{className:"project-list section"},r.a.createElement("div",{className:"z-depth-1",style:{width:"96%",height:"50px",margin:"0 auto"}},r.a.createElement("div",{className:"select-container",style:L},r.a.createElement("select",{name:"sortType",id:"sortType",value:this.state.sortType,style:Y,onChange:this.handleChange},r.a.createElement("option",{value:"newest"},"NAJNOWSZE"),r.a.createElement("option",{value:"oldest"},"NAJSTARSZE")),r.a.createElement("select",{name:"filterType",id:"filterType",value:this.state.filterType,style:Y,onChange:this.handleChange},r.a.createElement("option",{value:"none"},"FILTER (BEZ)"),r.a.createElement("option",{value:"type"},"TYP DOKUMENTU"),r.a.createElement("option",{value:"period"},"ZA OKRES")),t)),e&&n.map(function(e){return r.a.createElement(f.a,{to:"/project/"+e.id,key:e.id},r.a.createElement(M,{invoice:e}))}),r.a.createElement("div",{className:"page-buttons",style:{background:"rgba(201, 204, 222, 0.5)"}},r.a.createElement("ul",{style:{display:"flex",justifyContent:"center"}},l&&l.map(function(e){return e}))))}}]),t}(n.Component),W=function(e){var t=e.invoice;return r.a.createElement("div",{className:"card z-depth-1 project-summary"},r.a.createElement("div",{className:"card-content grey-text text-darken-3"},r.a.createElement("span",{className:"card-title"},t.title),r.a.createElement("p",null,"Dla: ",t.clientId),r.a.createElement("p",{className:"grey-text text-darken-1"},"Okres: ",r.a.createElement("span",{className:"red-text text-lighten-1"},t.issuePeriod)),r.a.createElement("p",{className:"grey-text"},_()(t.createdAt.toDate()).calendar())))},B={display:"flex"},K={display:"initial"},G=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleSort=function(e,t){var a=[];switch(t){case"newest":a=e.slice().sort(function(e,t){return new Date(t.createdAt.toDate())-new Date(e.createdAt.toDate())});break;case"oldest":a=e.slice().sort(function(e,t){return new Date(e.createdAt.toDate())-new Date(t.createdAt.toDate())})}return a},a.handleFilter=function(e,t,a){var n=[];switch(t){case"pick":n=e.slice()}switch(a){case"period":n=e.filter(function(e){return e.issuePeriod===t});break;default:n=e.slice()}return n},a.handleChange=function(e){var t;a.setState((t={},Object(j.a)(t,e.target.id,e.target.value),Object(j.a)(t,"currentPage",0),t))},a.handleFilterType=function(e,t){switch(e){case"none":return"pick"!==a.state.filterTarget&&a.setState({filterTarget:"pick"}),r.a.createElement("select",{name:"filterTarget",id:"filterTarget",value:a.state.filterTarget,style:K,onChange:a.handleChange},r.a.createElement("option",{value:"pick",default:!0},"--"));case"period":var n=[];return t.map(function(e){n.includes(e.issuePeriod)||n.push(e.issuePeriod)}),r.a.createElement("select",{name:"filterTarget",id:"filterTarget",value:a.state.filterTarget,style:K,onChange:a.handleChange},r.a.createElement("option",{value:"pick"},"WSZYSTKIE"),n.map(function(e){return r.a.createElement("option",{value:e,key:e},e)}));default:return r.a.createElement("select",{name:"filterTarget",id:"filterTarget",value:a.state.filterType,style:K,onChange:a.handleChange})}},a.handlePagination=function(e,t){var a=[];if(!(e.length>5))return a=e.slice();for(var n=e.slice(),r=0;r<n.length+1;r++)a.push(n.splice(0,5));return a[t]},a.handlePageButtons=function(e){var t=Math.ceil(e.length/5);if(t&&e.length>5){for(var n=[],l=function(e){n.push(r.a.createElement("li",{key:e+"pageLink"},r.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),a.setState({currentPage:e})},style:e===a.state.currentPage?{color:"red"}:{color:"black"}},e+1)))},i=0;i<t;i++)l(i);return n}return!1},a.state={sortType:"newest",filterType:"none",filterTarget:"pick",currentPage:0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.handleSort(this.props.invoices,this.state.sortType),t=this.handleFilterType(this.state.filterType,e),a=this.handleFilter(e,this.state.filterTarget,this.state.filterType),n=this.handlePagination(a,this.state.currentPage),l=this.handlePageButtons(e);return r.a.createElement("div",{className:"project-list section"},r.a.createElement("div",{className:"z-depth-1",style:{width:"96%",height:"50px",margin:"0 auto"}},r.a.createElement("div",{className:"select-container",style:B},r.a.createElement("select",{name:"sortType",id:"sortType",value:this.state.sortType,style:K,onChange:this.handleChange},r.a.createElement("option",{value:"newest"},"NAJNOWSZE"),r.a.createElement("option",{value:"oldest"},"NAJSTARSZE")),r.a.createElement("select",{name:"filterType",id:"filterType",value:this.state.filterType,style:K,onChange:this.handleChange},r.a.createElement("option",{value:"none"},"FILTER (BEZ)"),r.a.createElement("option",{value:"period"},"OKRES")),t)),e&&n.map(function(e){return r.a.createElement(f.a,{to:"/settlement/"+e.id,key:e.id},r.a.createElement(W,{invoice:e}))}),r.a.createElement("div",{className:"page-buttons",style:{background:"rgba(201, 204, 222, 0.5)"}},r.a.createElement("ul",{style:{display:"flex",justifyContent:"center"}},l&&l.map(function(e){return e}))))}}]),t}(n.Component),V=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.invoices,a=e.auth,n=e.user,l=e.settlements;return n&&!0===n[0].isAcc?r.a.createElement(T.a,{to:"/accpanel"}):a.uid?t&&l?r.a.createElement("div",{className:"dashboard container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"card z-depth-0",style:{background:"rgba(64, 70, 84, 0.74)"}},r.a.createElement("span",{className:"card-title white-text bold"},"FAKTURY")),r.a.createElement(Z,{invoices:t})),r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"card z-depth-0",style:{background:"rgba(64, 70, 84, 0.74)"}},r.a.createElement("span",{className:"card-title white-text"},"ROZLICZENIA")),r.a.createElement(G,{invoices:l})))):r.a.createElement("div",{className:"container center"},r.a.createElement("p",null,"\u0141adowanie...")):r.a.createElement(T.a,{to:"/"})}}]),t}(n.Component),J=Object(z.d)(Object(g.b)(function(e){return{invoices:e.firestore.ordered.invoices,settlements:e.firestore.ordered.settlements,auth:e.firebase.auth,user:e.firestore.ordered.users}}),Object(A.firestoreConnect)(function(e){return[{collection:"invoices",where:["userId","==",e.auth.uid?e.auth.uid:null],orderBy:["createdAt","desc"]},{collection:"users",doc:e.auth.uid},{collection:"settlements",where:["clientId","==",e.auth.uid?e.auth.uid:null],orderBy:["createdAt","desc"]}]}))(V),H={display:"flex"},q={display:"initial"},Q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleSort=function(e,t){var a=[];switch(t){case"newest":a=e.slice().sort(function(e,t){return new Date(t.createdAt.toDate())-new Date(e.createdAt.toDate())});break;case"oldest":a=e.slice().sort(function(e,t){return new Date(e.createdAt.toDate())-new Date(t.createdAt.toDate())})}return a},a.handleFilter=function(e,t,a){var n=[];switch(t){case"pick":n=e.slice()}switch(a){case"type":n=e.filter(function(e){return e.docType===t});break;case"period":n=e.filter(function(e){return e.issuePeriod===t});break;case"user":n=e.filter(function(e){return e.userId===t});break;default:n=e.slice()}return n},a.handleChange=function(e){var t;a.setState((t={},Object(j.a)(t,e.target.id,e.target.value),Object(j.a)(t,"currentPage",0),t))},a.handleFilterType=function(e,t,n){switch(e){case"none":return"pick"!==a.state.filterTarget&&a.setState({filterTarget:"pick"}),r.a.createElement("select",{name:"filterTarget",id:"filterTarget",value:a.state.filterTarget,style:q,onChange:a.handleChange},r.a.createElement("option",{value:"pick",default:!0},"--"));case"type":return r.a.createElement("select",{name:"filterTarget",id:"filterTarget",value:a.state.filterTarget,style:q,onChange:a.handleChange},r.a.createElement("option",{value:"pick"},"WSZYSTKIE"),r.a.createElement("option",{value:"sale"},"SPRZEDA\u017b"),r.a.createElement("option",{value:"expence"},"WYDATEK"),r.a.createElement("option",{value:"other"},"INNE"));case"period":var l=[];return t.map(function(e){l.includes(e.issuePeriod)||l.push(e.issuePeriod)}),r.a.createElement("select",{name:"filterTarget",id:"filterTarget",value:a.state.filterTarget,style:q,onChange:a.handleChange},r.a.createElement("option",{value:"pick"},"ALL"),l.map(function(e){return r.a.createElement("option",{value:e,key:e},e)}));case"user":var i=[];return n.map(function(e){i.includes(e.id)||i.push(e.id)}),r.a.createElement("select",{name:"filterTarget",id:"filterTarget",value:a.state.filterTarget,style:q,onChange:a.handleChange},r.a.createElement("option",{value:"pick"},"WSZYSTKIE"),i.map(function(e){return r.a.createElement("option",{value:e,key:e},e)}));default:return r.a.createElement("select",{name:"filterTarget",id:"filterTarget",value:a.state.filterType,style:q,onChange:a.handleChange})}},a.handlePagination=function(e,t){var a=[];if(!(e.length>5))return a=e.slice();for(var n=e.slice(),r=0;r<n.length+1;r++)a.push(n.splice(0,5));return a[t]},a.handlePageButtons=function(e){var t=Math.ceil(e.length/5);if(t&&e.length>5){for(var n=[],l=function(e){n.push(r.a.createElement("li",{key:e+"pageLink"},r.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),a.setState({currentPage:e})},style:e===a.state.currentPage?{color:"red"}:{color:"black"}},e+1)))},i=0;i<t;i++)l(i);return n}return!1},a.state={sortType:"newest",filterType:"none",filterTarget:"pick",currentPage:0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.handleSort(this.props.invoices,this.state.sortType),t=this.handleFilterType(this.state.filterType,e,this.props.users),a=this.handleFilter(e,this.state.filterTarget,this.state.filterType),n=this.handlePagination(a,this.state.currentPage),l=this.handlePageButtons(e);return r.a.createElement("div",{className:"project-list section"},r.a.createElement("div",{className:"z-depth-1",style:{width:"96%",height:"50px",margin:"0 auto"}},r.a.createElement("div",{className:"select-container",style:H},r.a.createElement("select",{name:"sortType",id:"sortType",value:this.state.sortType,style:q,onChange:this.handleChange},r.a.createElement("option",{value:"newest"},"NAJNOWSZE"),r.a.createElement("option",{value:"oldest"},"NAJSTARSZE")),r.a.createElement("select",{name:"filterType",id:"filterType",value:this.state.filterType,style:q,onChange:this.handleChange},r.a.createElement("option",{value:"none"},"FILTER (BEZ)"),r.a.createElement("option",{value:"type"},"TYP DOKUMENTU"),r.a.createElement("option",{value:"period"},"ZA OKRES"),r.a.createElement("option",{value:"user"},"ID")),t)),e&&n.map(function(e){return r.a.createElement(f.a,{to:"/project/"+e.id,key:e.id},r.a.createElement(M,{invoice:e}))}),r.a.createElement("div",{className:"page-buttons",style:{background:"rgba(201, 204, 222, 0.5)"}},r.a.createElement("ul",{style:{display:"flex",justifyContent:"center"}},l&&l.map(function(e){return e}))))}}]),t}(n.Component),X={display:"flex"},$={display:"initial"},ee=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleSort=function(e,t){var a=[];switch(t){case"newest":a=e.slice().sort(function(e,t){return new Date(t.createdAt.toDate())-new Date(e.createdAt.toDate())});break;case"oldest":a=e.slice().sort(function(e,t){return new Date(e.createdAt.toDate())-new Date(t.createdAt.toDate())})}return a},a.handleFilter=function(e,t,a){var n=[];switch(t){case"pick":n=e.slice()}switch(a){case"period":n=e.filter(function(e){return e.issuePeriod===t});break;case"user":n=e.filter(function(e){return e.clientId===t});break;default:n=e.slice()}return n},a.handleChange=function(e){var t;a.setState((t={},Object(j.a)(t,e.target.id,e.target.value),Object(j.a)(t,"currentPage",0),t))},a.handleFilterType=function(e,t,n){switch(e){case"none":return"pick"!==a.state.filterTarget&&a.setState({filterTarget:"pick"}),r.a.createElement("select",{name:"filterTarget",id:"filterTarget",value:a.state.filterTarget,style:$,onChange:a.handleChange},r.a.createElement("option",{value:"pick",default:!0},"--"));case"period":var l=[];return t.map(function(e){l.includes(e.issuePeriod)||l.push(e.issuePeriod)}),r.a.createElement("select",{name:"filterTarget",id:"filterTarget",value:a.state.filterTarget,style:$,onChange:a.handleChange},r.a.createElement("option",{value:"pick"},"WSZYSTKIE"),l.map(function(e){return r.a.createElement("option",{value:e,key:e},e)}));case"user":var i=[];return n.map(function(e){i.includes(e.id)||i.push(e.id)}),r.a.createElement("select",{name:"filterTarget",id:"filterTarget",value:a.state.filterTarget,style:$,onChange:a.handleChange},r.a.createElement("option",{value:"pick"},"WSZYSTKIE"),i.map(function(e){return r.a.createElement("option",{value:e,key:e},e)}));default:return r.a.createElement("select",{name:"filterTarget",id:"filterTarget",value:a.state.filterType,style:$,onChange:a.handleChange})}},a.handlePagination=function(e,t){var a=[];if(!(e.length>5))return a=e.slice();for(var n=e.slice(),r=0;r<n.length+1;r++)a.push(n.splice(0,5));return a[t]},a.handlePageButtons=function(e){var t=Math.ceil(e.length/5);if(t&&e.length>5){for(var n=[],l=function(e){n.push(r.a.createElement("li",{key:e+"pageLink"},r.a.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),a.setState({currentPage:e})},style:e===a.state.currentPage?{color:"red"}:{color:"black"}},e+1)))},i=0;i<t;i++)l(i);return n}return!1},a.state={sortType:"newest",filterType:"none",filterTarget:"pick",currentPage:0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.handleSort(this.props.invoices,this.state.sortType),t=this.handleFilterType(this.state.filterType,e,this.props.users),a=this.handleFilter(e,this.state.filterTarget,this.state.filterType),n=this.handlePagination(a,this.state.currentPage),l=this.handlePageButtons(e);return r.a.createElement("div",{className:"project-list section"},r.a.createElement("div",{className:"z-depth-1",style:{width:"96%",height:"50px",margin:"0 auto"}},r.a.createElement("div",{className:"select-container",style:X},r.a.createElement("select",{name:"sortType",id:"sortType",value:this.state.sortType,style:$,onChange:this.handleChange},r.a.createElement("option",{value:"newest"},"NAJSTARSZE"),r.a.createElement("option",{value:"oldest"},"NAJNOWSZE")),r.a.createElement("select",{name:"filterType",id:"filterType",value:this.state.filterType,style:$,onChange:this.handleChange},r.a.createElement("option",{value:"none"},"FILTER (BEZ)"),r.a.createElement("option",{value:"period"},"ZA OKRES"),r.a.createElement("option",{value:"user"},"ID")),t)),e&&n.map(function(e){return r.a.createElement(f.a,{to:"/settlement/"+e.id,key:e.id},r.a.createElement(W,{invoice:e}))}),r.a.createElement("div",{className:"page-buttons",style:{background:"rgba(201, 204, 222, 0.5)"}},r.a.createElement("ul",{style:{display:"flex",justifyContent:"center"}},l&&l.map(function(e){return e}))))}}]),t}(n.Component),te=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.invoices,a=e.auth,n=e.settlements;return a.uid?"8XfhiRtQuugytCSQO9LrFDQXtNr2"!==a.uid?r.a.createElement(T.a,{to:"/dashboard"}):t&&n?r.a.createElement("div",{className:"dashboard container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"card z-depth-0",style:{background:"rgba(64, 70, 84, 0.74)"}},r.a.createElement("span",{className:"card-title white-text bold"},"FAKTURY")),r.a.createElement(Q,{invoices:t,users:this.props.users})),r.a.createElement("div",{className:"col s12 m6"},r.a.createElement("div",{className:"card z-depth-0",style:{background:"rgba(64, 70, 84, 0.74)"}},r.a.createElement("span",{className:"card-title white-text"},"ROZLICZENIA")),r.a.createElement(ee,{invoices:n,users:this.props.users})))):r.a.createElement("div",{className:"container center"},r.a.createElement("p",null,"\u0141adowanie...")):r.a.createElement(T.a,{to:"/"})}}]),t}(n.Component),ae=Object(z.d)(Object(g.b)(function(e){return{invoices:e.firestore.ordered.invoices,settlements:e.firestore.ordered.settlements,auth:e.firebase.auth,users:e.firestore.ordered.users}}),Object(A.firestoreConnect)(function(e){return[{collection:"invoices",orderBy:["createdAt","desc"]},{collection:"users",where:["isAcc","==",!1]},{collection:"settlements",orderBy:["createdAt","desc"]}]}))(te),ne=a(20),re=a.n(ne),le=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.state={open:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement(N.a,{onClick:this.handleOpen,disableRipple:!0,focusRipple:!1,className:e.deleteButton},"Usu\u0144 Faktur\u0119"),r.a.createElement(N.b,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",maxWidth:"xl"},r.a.createElement("div",{className:"card z-depth-0 invoice-delete-card"},r.a.createElement("span",{className:"card-title center"},"USU\u0143"),r.a.createElement("p",null,"Czy na pewno chcesz usun\u0105\u0107 dokument?"),r.a.createElement("div",{className:"deleteYesNo"},r.a.createElement(N.a,{onClick:this.props.handleDelete,disableRipple:!0,focusRipple:!1,className:e.deleteYesNo},"Tak"),r.a.createElement(N.a,{onClick:this.handleClose,disableRipple:!0,focusRipple:!1,className:e.deleteYesNo},"Nie")))))}}]),t}(n.Component),ie=Object(O.withStyles)(function(e){return{deleteButton:{backgroundColor:"#ef5350",color:"white",padding:"7px",marginTop:"5px",transition:"background-color .1s","&:hover":{backgroundColor:"#f44336"},"&:focus":{backgroundColor:"#ef5350"}},deleteYesNo:{margin:"5px",backgroundColor:"#ef5350",color:"white",padding:"7px",marginTop:"5px",width:"100px",transition:"background-color .1s","&:hover":{backgroundColor:"#f44336"},"&:focus":{backgroundColor:"#ef5350"}}}})(le),se={display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:16},ce={display:"inline-flex",borderRadius:2,border:"1px solid #eaeaea",marginBottom:8,marginRight:8,width:100,height:100,padding:4,boxSizing:"border-box"},oe={display:"flex",minWidth:0,overflow:"hidden"},ue={display:"block",position:"relative",width:"auto",height:"100%",zIndex:0},de={position:"absolute",width:"25px",height:"25px",zIndex:2,marginTop:0,textAlign:"center"},me={width:"99%",minHeight:100,padding:10,border:"1px dashed grey",borderRadius:"10px"},he={backgroundColor:"#ef5350",color:"white",paddingTop:"5px",paddingLeft:"7px",paddingRight:"7px",marginTop:"5px",marginLeft:"5px",transition:"background-color .1s","&:hover":{backgroundColor:"#f44336"},"&:focus":{backgroundColor:"#ef5350"}},pe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleDelete=function(){a.props.deleteInvoice(a.props.invoiceId);var e=a.props.invoice.filesName;e&&e.map(function(e){re.a.storage().ref("uploaded").child(e).delete().then(function(){console.log(e+" succesfully deleted")}).catch(function(e){console.log(e)})}),a.props.history.push("/dashboard")},a.createDownloadButton=function(e,t){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="blob",a.onload=function(){var e=URL.createObjectURL(a.response);document.getElementById(t).href=e},a.send()},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.auth.uid)return r.a.createElement(T.a,{to:"/"});var t=this.props.invoice;if(t&&t.filesName){var a=t.filesUrl,n=t.filesName.map(function(t){return r.a.createElement("div",{style:ce,key:t},r.a.createElement("div",{style:oe},r.a.createElement("img",{src:a[t],style:ue,alt:t}),r.a.createElement("a",{id:t,download:!0,style:de,className:"btn-floating btn-small red lighten-1"},r.a.createElement("i",{style:{marginTop:-7},className:"material-icons"},"get_app")),e.createDownloadButton(a[t],t)))});return r.a.createElement("div",{className:"container section project-details"},r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},t.title),r.a.createElement("p",{className:"grey-text"},"Dokumenty za okres: ",t.issuePeriod),r.a.createElement("aside",{style:se},n),r.a.createElement("p",null,"Komentarze:"),r.a.createElement("div",{className:"comments-box",style:me},r.a.createElement("p",null,t.comment)),r.a.createElement("div",{className:"bottom-btn-container",style:{display:"flex"}},r.a.createElement(ie,{handleDelete:this.handleDelete}),r.a.createElement(f.a,{to:"/project/update/"+this.props.match.params.id,key:t.id,style:he},"Zaktualizuj"))),r.a.createElement("div",{className:"card-action grey lighten-4 grey-text"},r.a.createElement("div",null,"Opublikowane przez ",t.clientName),r.a.createElement("div",null,_()(t.createdAt.toDate()).calendar()))))}return t?r.a.createElement("div",{className:"container section project-details"},r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},t.title),r.a.createElement("p",null,"Komentarze: ",t.comment),r.a.createElement(ie,{handleDelete:this.handleDelete})),r.a.createElement("div",{className:"card-action grey lighten-4 grey-text"},r.a.createElement("div",null,"Opublikowane przez ",t.clientName),r.a.createElement("div",null,_()(t.createdAt.toDate()).calendar())))):r.a.createElement("div",{className:"container center"},r.a.createElement("p",null,"\u0141adowanie..."))}}]),t}(n.Component),fe=Object(z.d)(Object(g.b)(function(e,t){var a=t.match.params.id,n=e.firestore.data.invoices;return{invoice:n?n[a]:null,invoiceId:t.match.params.id,auth:e.firebase.auth}},function(e){return{deleteInvoice:function(t){return e(function(e){return function(t,a,n){n.getFirebase,(0,n.getFirestore)().collection("invoices").doc(e).delete().then(function(){t({type:"DELETE_INVOICE",invoiceId:e})}).catch(function(e){t({type:"DELETE_INVOICE_ERROR",err:e})})}}(t))}}}),Object(A.firestoreConnect)(function(e){return[{collection:"invoices",where:["userId","==",e.auth.uid?e.auth.uid:null]}]}))(pe),Ee=a(137),ge=a(38),be=a.n(ge),ve=a(138),ye={display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:16},Ne={display:"inline-flex",borderRadius:2,border:"1px solid #eaeaea",marginBottom:8,marginRight:8,width:100,height:100,padding:4,boxSizing:"border-box"},Oe={display:"flex",minWidth:0,overflow:"hidden"},je={display:"block",position:"relative",width:"auto",height:"100%",zIndex:0},Te={position:"absolute",width:"25px",height:"25px",zIndex:2,marginTop:0,textAlign:"center"},xe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(j.a)({},e.target.id,e.target.value))},a.handleMonthFormat=function(e){1===e.target.value.length&&(e.target.value="0"+e.target.value),a.setState(Object(j.a)({},e.target.id,e.target.value))},a.handlePeriodSet=function(e,t){e&&t?a.setState({issuePeriod:e+"-"+t}):a.setState({issuePeriod:""})},a.handleSubmit=function(e){e.preventDefault();var t={docType:a.state.docType,title:a.state.title,issuePeriod:a.state.issueYear+"-"+a.state.issueMonth,comment:a.state.comment,filesName:a.state.filesName,filesUrl:a.state.filesUrl};a.props.createInvoice(t),a.props.history.push("/dashboard")},a.disableSend=function(){var e={docType:a.state.docType,title:a.state.title,issueYear:a.state.issueYear,issueMonth:a.state.issueMonth,filesName:a.state.filesName,filesUrl:a.state.filesUrl};return Object.values(e).some(function(e){return e.length<1})},a.onDrop=function(e,t){if(t.length){var n=t.map(function(e){return"File "+e.name+" was not able to be uploaded."});alert(n)}var r={customMetadata:{fileOwner:re.a.auth().currentUser.uid}};e.map(function(e){var t=(new Date).getTime()+"_"+e.name;re.a.storage().ref("uploaded").child(t).put(e,r).on(re.a.storage.TaskEvent.STATE_CHANGED,function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),a.setState({uploadProgress:t}),e.state){case re.a.storage.TaskState.PAUSED:case re.a.storage.TaskState.RUNNING:}},function(e){console.log(e)},function(){re.a.storage().ref("uploaded").child(t).getDownloadURL().then(function(e){a.setState({filesName:[].concat(Object(Ee.a)(a.state.filesName),[t]),filesUrl:Object.assign(a.state.filesUrl,Object(j.a)({},t,e))})})})})},a.handleDelete=function(e){e.preventDefault(),a.state.filesName.map(function(e){re.a.storage().ref("uploaded").child(e).delete().then(function(){a.setState({filesName:[],filesUrl:{},uploadProgress:0}),console.log("files deleted successfully!")}).catch(function(e){console.log(e)})})},a.state={docType:"",title:"",issuePeriod:"",comment:"",filesName:[],filesUrl:{},issueYear:"",issueMonth:"",uploadProgress:0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.filesUrl,a=this.state.filesName,n=Math.floor(this.state.uploadProgress),l=a?a.map(function(e){return r.a.createElement("div",{style:Ne,key:e},r.a.createElement("div",{style:Oe},r.a.createElement("img",{src:t[e],style:je,alt:e})))}):console.log("uploading"),i=n>0?r.a.createElement("button",{className:"btn-floating red lighten-1",style:Te,onClick:function(t){return e.handleDelete(t)}},r.a.createElement("i",{className:"small material-icons",style:{marginTop:-7}},"delete")):"";return this.props.auth.uid?r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Wy\u015blij Now\u0105 Faktur\u0119"),r.a.createElement("div",{className:"input-field"},r.a.createElement("select",{className:"browser-default",name:"docType",id:"docType",onChange:this.handleChange,value:this.state.docType},r.a.createElement("option",{value:"",defaultValue:!0,disabled:!0},"Typ Dokumentu"),r.a.createElement("option",{value:"sale"},"Faktura Sprzeda\u017cowa"),r.a.createElement("option",{value:"expence"},"Faktura Wydatkowa"),r.a.createElement("option",{value:"other"},"Inny Dokument"))),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"title"},"Tytu\u0142"),r.a.createElement("input",{type:"text",id:"title",onChange:this.handleChange})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s3"},r.a.createElement("label",{htmlFor:"issueYear"},"Rok"),r.a.createElement("input",{type:"number",id:"issueYear",name:"issueYear",min:"2017",max:"2022",value:this.state.issueYear,onChange:this.handleChange,style:{width:100},required:!0})),r.a.createElement("div",{className:"input-field col s3"},r.a.createElement("label",{htmlFor:"issueMonth"},"Miesi\u0105c"),r.a.createElement("input",{type:"number",id:"issueMonth",name:"issueMonth",min:"1",max:"12",value:this.state.issueMonth,onChange:this.handleMonthFormat,style:{width:75},required:!0})),r.a.createElement("label",{style:{display:"inline",position:"relative",fontSize:"1.1rem",marginTop:15},className:"col s5"},"Dokumenty za okres")),r.a.createElement("div",{className:"input-field"},r.a.createElement(ve.a,{accept:"image/*,application/pdf",onDrop:this.onDrop,maxSize:6291456},function(e){var t=e.getRootProps,a=e.getInputProps,n=e.isDragActive;return r.a.createElement("div",Object.assign({},t(),{className:be()("dropzone",{"dropzone--isActive":n})}),r.a.createElement("input",a()),n?r.a.createElement("p",null,"Upu\u015b\u0107 pliki tutaj..."):r.a.createElement("p",null,"Upu\u015b\u0107 pliki tutaj (jpg/pdf)"))}),r.a.createElement("aside",{style:ye},l,i,r.a.createElement("p",null,n<100&&n>0?"uploading...".concat(n,"%"):""))),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"comment"},"Komentarze"),r.a.createElement("textarea",{id:"comment",className:"materialize-textarea",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn red lighten-1 z-depth-0",disabled:this.disableSend()},"Wy\u015blij"))))):r.a.createElement(T.a,{to:"/"})}}]),t}(n.Component),Ce=Object(g.b)(function(e){return{auth:e.firebase.auth}},function(e){return{createInvoice:function(t){return e(function(e){return function(t,a,n){n.getFirebase;var r=(0,n.getFirestore)(),l=a().firebase.profile,i=a().firebase.auth.uid;r.collection("invoices").add(Object(b.a)({},e,{clientName:l.clientName,userId:i,createdAt:new Date,opened:!1,settled:!1})).then(function(){t({type:"CREATE_INVOICE",invoice:e})}).catch(function(e){t({type:"CREATE_INVOICE_ERROR",err:e})})}}(t))}}})(xe),ke=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(j.a)({},e.target.id,e.target.value))},a.handleMonthFormat=function(e){1===e.target.value.length&&(e.target.value="0"+e.target.value),a.setState(Object(j.a)({},e.target.id,e.target.value))},a.handleTaxChange=function(e){a.setState({tax:Object(b.a)({},a.state.tax,Object(j.a)({},e.target.id,e.target.value))})},a.handleTaxRow=function(){for(var e=[],t=2;t<=a.state.taxRows;t++)e.push(r.a.createElement("div",{className:"input-field",key:"taxRow"+t},r.a.createElement("label",{htmlFor:"tax"+t},"Rodzaj Podatku - Wysoko\u015b\u0107 Podatku"),r.a.createElement("input",{type:"text",name:"tax"+t,value:a.state.tax["tax"+t],id:"tax"+t,onChange:a.handleTaxChange,style:{width:"25%",display:"block"}})));return e},a.handleAddTaxRow=function(){a.setState({taxRows:a.state.taxRows+1})},a.handleRemoveTaxRow=function(){if(a.state.taxRows>1){var e=a.state.tax;delete e["tax"+a.state.taxRows],a.setState({tax:e,taxRows:a.state.taxRows-1})}},a.handleSubmit=function(e){e.preventDefault();var t={title:a.state.title,clientId:a.state.clientId,issueYear:a.state.issueYear,issueMonth:a.state.issueMonth,issuePeriod:a.state.issueYear+"-"+a.state.issueMonth,tax:a.state.tax,comment:a.state.comment};console.log(a.state),a.props.createSettlement(t),a.props.history.push("/dashboard")},a.disableSend=function(){var e={title:a.state.title,clientId:a.state.clientId,tax:a.state.tax};return Object.values(e).some(function(e){return e.length<1})},a.state={title:"",clientId:"",issueYear:"",issueMonth:"",tax:{},taxRows:1,comment:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.auth,t=this.props.users,a=this.handleTaxRow();return e.uid?t?r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Wy\u015blij Nowe Rozliczenie"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"title"},"Tytu\u0142 Rozliczenia"),r.a.createElement("input",{type:"text",id:"title",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("select",{name:"clientId",id:"clientId",className:"browser-default",onChange:this.handleChange,value:this.state.clientId},r.a.createElement("option",{value:"",defaultValue:!0,disabled:!0},"Dla klienta:"),t.map(function(e){return r.a.createElement("option",{value:e.id,key:e.id,id:"clientId"},e.clientName)}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s3"},r.a.createElement("label",{htmlFor:"issueYear"},"Rok"),r.a.createElement("input",{type:"number",id:"issueYear",name:"issueYear",min:"2017",max:"2022",value:this.state.issueYear,onChange:this.handleChange,style:{width:100},required:!0})),r.a.createElement("div",{className:"input-field col s3"},r.a.createElement("label",{htmlFor:"issueMonth"},"Miesi\u0105c"),r.a.createElement("input",{type:"number",id:"issueMonth",name:"issueMonth",min:"1",max:"12",value:this.state.issueMonth,onChange:this.handleMonthFormat,style:{width:75},required:!0})),r.a.createElement("label",{style:{display:"inline",position:"relative",fontSize:"1.1rem",marginTop:15},className:"col s5"},"Rozliczenie obejmuje okres")),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"tax1"},"Rodzaj Podatku - Wysoko\u015b\u0107 Podatku"),r.a.createElement("input",{type:"text",name:"tax1",value:this.state.tax.tax1,id:"tax1",onChange:this.handleTaxChange,style:{width:"25%"}}),r.a.createElement("label",{htmlFor:"tax1"},"Rodzaj Podatku - Wysoko\u015b\u0107 Podatku")),a&&a.map(function(e){return e}),r.a.createElement("div",{stle:{display:"flex"}},r.a.createElement("button",{type:"button",className:"btn-floating btn-small red",style:{marginRight:10},onClick:this.handleAddTaxRow},r.a.createElement("i",{className:"material-icons"},"add")),r.a.createElement("button",{type:"button",className:"btn-floating btn-small red",onClick:this.handleRemoveTaxRow},r.a.createElement("i",{className:"material-icons"},"remove"))),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"comment"},"Komentarze"),r.a.createElement("textarea",{id:"comment",className:"materialize-textarea",onChange:this.handleChange})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn red lighten-1 z-depth-0",type:"submit",disabled:this.disableSend()},"Send"))))):r.a.createElement("div",{className:"container center"},r.a.createElement("p",null,"\u0141adowanie...")):r.a.createElement(T.a,{to:"/"})}}]),t}(n.Component),we=Object(z.d)(Object(g.b)(function(e){return{auth:e.firebase.auth,users:e.firestore.ordered.users}},function(e){return{createSettlement:function(t){return e(function(e){return function(t,a,n){n.getFirebase,(0,n.getFirestore)().collection("settlements").add(Object(b.a)({},e,{createdAt:new Date,opened:!1})).then(function(){t({type:"CREATE_SETTLEMENT",settlement:e})}).catch(function(e){t({type:"CREATE_SETTLEMENT_ERROR",err:e})})}}(t))}}}),Object(A.firestoreConnect)(function(e){return[{collection:"users",where:["isAcc","==",!1]}]}))(ke),Se=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.state={open:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.a,{onClick:this.handleOpen,className:"waves-effect waves-light btn white-text",style:{width:"100%",background:"rgba(64, 70, 84, 1)"}},"Zaloguj"),r.a.createElement(N.b,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",maxWidth:"xl"},r.a.createElement(R,{closeDialog:this.handleClose})))}}]),t}(n.Component),Re=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.state={open:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.a,{onClick:this.handleOpen,className:"waves-effect waves-light btn white-text",style:{width:"100%",background:"rgba(64, 70, 84, 1)"}},"Rejestracja"),r.a.createElement(N.b,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",maxWidth:"xl"},r.a.createElement(C,{closeDialog:this.handleClose})))}}]),t}(n.Component),De=Object(g.b)(function(e){return{auth:e.firebase.auth}})(function(e){return e.auth.uid?r.a.createElement(T.a,{to:"/dashboard"}):r.a.createElement("div",{className:"card white inup-intro"},r.a.createElement("span",{className:"card-title center inup-intro-title"},"E-Accountant"),r.a.createElement("p",{className:"grey-text center"},"Zaloguj si\u0119 do swojego konta, lub zarejestruj!"),r.a.createElement(Se,null),r.a.createElement(Re,null))}),Pe={display:"flex",flexDirection:"row",flexWrap:"wrap",marginTop:16},Ie={display:"inline-flex",borderRadius:2,border:"1px solid #eaeaea",marginBottom:8,marginRight:8,width:100,height:100,padding:4,boxSizing:"border-box"},Fe={display:"flex",minWidth:0,overflow:"hidden"},Ae={display:"block",position:"relative",width:"auto",height:"100%",zIndex:0},ze={position:"absolute",width:"25px",height:"25px",zIndex:2,marginTop:0,textAlign:"center"},Ue=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(j.a)({},e.target.id,e.target.value))},a.handleMonthFormat=function(e){1===e.target.value.length&&(e.target.value="0"+e.target.value),a.setState(Object(j.a)({},e.target.id,e.target.value))},a.handlePeriodSet=function(e,t){e&&t?a.setState({issuePeriod:e+"-"+t}):a.setState({issuePeriod:""})},a.onDrop=function(e,t){if(t.length){var n=t.map(function(e){return"File "+e.name+" was not able to be uploaded."});alert(n)}var r={customMetadata:{fileOwner:re.a.auth().currentUser.uid}};e.map(function(e){var t=(new Date).getTime()+"_"+e.name;re.a.storage().ref("uploaded").child(t).put(e,r).on(re.a.storage.TaskEvent.STATE_CHANGED,function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),a.setState({uploadProgress:t}),e.state){case re.a.storage.TaskState.PAUSED:case re.a.storage.TaskState.RUNNING:}},function(e){console.log(e)},function(){re.a.storage().ref("uploaded").child(t).getDownloadURL().then(function(e){a.setState({filesName:[].concat(Object(Ee.a)(a.state.filesName),[t]),filesUrl:Object.assign(a.state.filesUrl,Object(j.a)({},t,e))})})})})},a.handleDelete=function(e){e.preventDefault(),a.state.filesName.map(function(e){re.a.storage().ref("uploaded").child(e).delete().then(function(){a.setState({filesName:[],filesUrl:{},uploadProgress:0},function(){re.a.firestore().collection("invoices").doc(a.props.match.params.id).update({filesName:[],filesUrl:{},uploadProgress:0})}),console.log("files deleted successfully!")}).catch(function(e){console.log(e)})}),a.setState({filesName:[],filesUrl:{},uploadProgress:0})},a.disableSend=function(){var e={docType:a.state.docType,title:a.state.title,issueYear:a.state.issueYear,issueMonth:a.state.issueMonth,filesName:a.state.filesName,filesUrl:a.state.filesUrl};return Object.values(e).some(function(e){return e.length<1})},a.handleSubmit=function(e){e.preventDefault();var t={docType:a.state.docType,title:a.state.title,issuePeriod:a.state.issueYear+"-"+a.state.issueMonth,comment:a.state.comment,filesName:a.state.filesName,filesUrl:a.state.filesUrl};a.props.updateInvoice(a.props.match.params.id,t),a.props.history.push("/project/"+a.props.match.params.id)},a.state={docType:"",title:"",issuePeriod:"",comment:"",filesName:[],filesUrl:{},issueYear:"",issueMonth:"",uploadProgress:0},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.auth.uid)return r.a.createElement(T.a,{to:"/"});if(this.props.invoice){var t=this.state.filesUrl,a=this.state.filesName,n=Math.floor(this.state.uploadProgress),l=a?a.map(function(e){return r.a.createElement("div",{style:Ie,key:e},r.a.createElement("div",{style:Fe},r.a.createElement("img",{src:t[e],style:Ae,alt:e})))}):console.log("uploading"),i=this.state.uploadProgress?r.a.createElement("button",{className:"btn-floating red lighten-1",style:ze,onClick:function(t){return e.handleDelete(t)}},r.a.createElement("i",{className:"small material-icons",style:{marginTop:-7}},"delete")):null;return r.a.createElement("div",null,r.a.createElement("div",{className:"container update-form"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"white"},r.a.createElement("h5",{className:"grey-text text-darken-3"},"Zaktualizuj Faktur\u0119"),r.a.createElement("div",{className:"input-field"},r.a.createElement("select",{className:"browser-default",name:"docType",id:"docType",onChange:this.handleChange,value:this.state.docType},r.a.createElement("option",{value:"",defaultValue:!0,disabled:!0},"Typ Dokumentu"),r.a.createElement("option",{value:"sale"},"Faktura Sprzeda\u017cowa"),r.a.createElement("option",{value:"expence"},"Faktura Wydatkowa"),r.a.createElement("option",{value:"other"},"Inny Dokument"))),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",id:"title",onChange:this.handleChange,value:this.state.title})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s3"},r.a.createElement("label",{htmlFor:"issueYear"},"Rok"),r.a.createElement("input",{type:"number",id:"issueYear",name:"issueYear",min:"2017",max:"2022",value:this.state.issueYear,onChange:this.handleChange,style:{width:100},required:!0})),r.a.createElement("div",{className:"input-field col s3"},r.a.createElement("label",{htmlFor:"issueMonth"},"Miesi\u0105c"),r.a.createElement("input",{type:"number",id:"issueMonth",name:"issueMonth",min:"1",max:"12",value:this.state.issueMonth,onChange:this.handleMonthFormat,style:{width:75},required:!0})),r.a.createElement("label",{style:{display:"inline",position:"relative",fontSize:"1.1rem",marginTop:15},className:"col s5"},"Dokumenty za okres")),r.a.createElement("div",{className:"input-field"},r.a.createElement(ve.a,{accept:"image/*,application/pdf",onDrop:this.onDrop,maxSize:6291456},function(t){var a=t.getRootProps,n=t.getInputProps,l=t.isDragActive;return e.state.filesName.length?r.a.createElement("div",null):r.a.createElement("div",Object.assign({},a(),{className:be()("dropzone",{"dropzone--isActive":l})}),r.a.createElement("input",n()),l?r.a.createElement("p",null,"Upu\u015b\u0107 pliki tutaj..."):r.a.createElement("p",null,"Upu\u015b\u0107 pliki tutaj (jpg/pdf)"))}),r.a.createElement("aside",{style:Pe},l,i,r.a.createElement("p",{className:"red-text text-lighten1"},"dokumenty zostan\u0105 usuni\u0119tie permanentnie!"),r.a.createElement("p",null,n<100&&n>0?"uploading...".concat(n,"%"):""))),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"comment"},"Komentarze"),r.a.createElement("textarea",{id:"comment",className:"materialize-textarea",onChange:this.handleChange,value:this.state.comment})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn red lighten-1 z-depth-0",disabled:this.disableSend()},"ZAPISZ")))))}return r.a.createElement("div",{className:"container center"},r.a.createElement("p",null,"\u0141adowanie..."))}}]),t}(n.Component);Ue.getDerivedStateFromProps=function(e,t){return e.invoice&&""===t.docType?Object(b.a)({},e.invoice,{uploadProgress:100,issueYear:e.invoice.issuePeriod.substring(0,4),issueMonth:e.invoice.issuePeriod.substring(5,8)}):t};var _e=Object(z.d)(Object(g.b)(function(e,t){var a=t.match.params.id,n=e.firestore.data.invoices,r=n?n[a]:null;return{auth:e.firebase.auth,invoiceId:a,invoice:r}},function(e){return{updateInvoice:function(t,a){return e(function(e,t){return function(a,n,r){r.getFirebase,(0,r.getFirestore)().collection("invoices").doc(e).update(Object(b.a)({},t,{opened:!1})).then(function(){a({type:"UPDATE_INVOICE",invoiceId:e})}).catch(function(e){a({type:"UPDATE_INVOICE_ERROR",err:e})})}}(t,a))}}}),Object(A.firestoreConnect)(function(e){return[{collection:"invoices",where:["userId","==",e.auth.uid?e.auth.uid:null]}]}))(Ue),Me=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.state={open:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement(N.a,{onClick:this.handleOpen,disableRipple:!0,focusRipple:!1,className:e.deleteButton},"Usu\u0144 Konto"),r.a.createElement(N.b,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",maxWidth:"xl"},r.a.createElement("div",{className:"card z-depth-0 invoice-delete-card"},r.a.createElement("span",{className:"card-title center"},"USU\u0143"),r.a.createElement("p",null,"Czy na pewno chcesz usun\u0105\u0107 swoje konto?"),r.a.createElement("p",{className:"red-text "},"Stracisz dost\u0119p do swoich plik\xf3w!"),r.a.createElement("p",{className:"grey-text"},"*w razie wyst\u0105pienia problemu, spr\xf3buj zalogowa\u0107 si\u0119 jeszcze raz i wtedy usun\u0105c swoje konto"),r.a.createElement("div",{className:"deleteYesNo"},r.a.createElement(N.a,{onClick:this.props.handleDeleteUser,disableRipple:!0,focusRipple:!1,className:e.deleteYesNo},"Tak"),r.a.createElement(N.a,{onClick:this.handleClose,disableRipple:!0,focusRipple:!1,className:e.deleteYesNo},"Nie")))))}}]),t}(n.Component),Le=Object(O.withStyles)(function(e){return{deleteButton:{backgroundColor:"#ef5350",color:"white",padding:"7px",marginTop:"5px",transition:"background-color .1s","&:hover":{backgroundColor:"#f44336"},"&:focus":{backgroundColor:"#ef5350"}},deleteYesNo:{margin:"5px",backgroundColor:"#ef5350",color:"white",padding:"7px",marginTop:"5px",width:"100px",transition:"background-color .1s","&:hover":{backgroundColor:"#f44336"},"&:focus":{backgroundColor:"#ef5350"}}}})(Me),Ye={backgroundColor:"#ef5350",color:"white",paddingTop:"5px",paddingLeft:"7px",paddingRight:"7px",marginTop:"5px",marginRight:"5px",transition:"background-color .1s","&:hover":{backgroundColor:"#f44336"},"&:focus":{backgroundColor:"#ef5350"}},Ze=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleDeleteUser=function(e){a.props.deleteUser(e)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.auth;if(!t.uid)return r.a.createElement(T.a,{to:"/"});if(this.props.users&&t){var a=this.props.users[t.uid];return console.log(t.uid),a?r.a.createElement("div",{className:"container section"},r.a.createElement("div",{className:"card z-depth-0",style:{transform:"scale(1.2)",margin:100}},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},a.clientName),r.a.createElement("p",{className:"grey-text"},"Email: ",r.a.createElement("span",{className:"grey-text text-darken-2"},t.email)),r.a.createElement("p",{className:"grey-text"},"Adres: ",r.a.createElement("span",{className:"grey-text text-darken-2"},a.adress)),r.a.createElement("p",{className:"grey-text"},"Forma prawna: ",r.a.createElement("span",{className:"grey-text text-darken-2"},a.legalForm)),r.a.createElement("p",{className:"grey-text"},"NIP: ",r.a.createElement("span",{className:"grey-text text-darken-2"},a.nip)),r.a.createElement("p",{className:"grey-text"},"REGON: ",r.a.createElement("span",{className:"grey-text text-darken-2"},a.regon)),r.a.createElement("p",{className:"grey-text"},"Telefon: ",r.a.createElement("span",{className:"grey-text text-darken-2"},a.phoneNumber)),r.a.createElement("div",{className:"bottom-btn-container",style:{display:"flex"}},r.a.createElement(f.a,{to:"/update/accountdetails/"+t.uid,key:"update",style:Ye},"Aktualizuj Dane"),r.a.createElement(Le,{handleDeleteUser:function(){return e.handleDeleteUser(t.uid)}}))))):r.a.createElement("div",{className:"container center"},r.a.createElement("p",null,"\u0141adowanie..."))}return r.a.createElement("div",{className:"container center"},r.a.createElement("p",null,"\u0141adowanie..."))}}]),t}(n.Component),We=Object(z.d)(Object(g.b)(function(e){return{auth:e.firebase.auth,users:e.firestore.data.users}},function(e){return{deleteUser:function(t){return e(function(e){return function(t,a,n){var r=n.getFirebase,l=n.getFirestore,i=r();l().collection("users").doc(e).delete().then(function(){console.log("user details deleted..."),i.auth().currentUser.delete().then(function(){t({type:"DELETE_USER"}),console.log("user deleted")}).catch(function(e){t({type:"DELETE_USER_ERROR",err:e}),console.log(e)})}).catch(function(e){console.log(e)})}}(t))}}}),Object(A.firestoreConnect)(function(e){return[{collection:"users",doc:e.auth.uid}]}))(Ze),Be=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleUpdate=function(e){e.preventDefault(),a.props.updateUser(a.props.auth.uid,a.state),a.props.history.push("/accountdetails/"+a.props.auth.uid)},a.handleChange=function(e){a.setState(Object(j.a)({},e.target.id,e.target.value))},a.disableSend=function(){var e={clientName:a.state.clientName,adress:a.state.adress,legalForm:a.state.legalForm,nip:a.state.nip,regon:a.state.regon};return Object.values(e).some(function(e){return e.length<1})},a.state={clientName:"",adress:"",legalForm:"",nip:"",regon:"",phoneNumber:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.auth;return e.uid?this.props.users&&e&&this.props.users[e.uid]?r.a.createElement("div",{className:"container section"},r.a.createElement("div",{className:"card z-depth-0",style:{transform:"scale(1)",margin:100}},r.a.createElement("div",{className:"card-content"},r.a.createElement("form",{onSubmit:this.handleUpdate,className:"update-form"},r.a.createElement("h5",{className:"red-text text-lighten-1"},"Zaktualizuj Profil"),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"clientName"},"Imi\u0119"),r.a.createElement("input",{type:"text",id:"clientName",onChange:this.handleChange,value:this.state.clientName})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"adress"},"Adres"),r.a.createElement("textarea",{id:"adress",className:"materialize-textarea",onChange:this.handleChange,value:this.state.adress})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"legalForm"},"Forma prawna (sp. z.o.o., sp. jawna...)"),r.a.createElement("input",{type:"text",id:"legalForm",onChange:this.handleChange,value:this.state.legalForm})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"nip"},"NIP"),r.a.createElement("input",{type:"number",id:"nip",onChange:this.handleChange,value:this.state.nip})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"regon"},"REGON"),r.a.createElement("input",{type:"number",id:"regon",onChange:this.handleChange,value:this.state.regon})),r.a.createElement("div",{className:"input-field"},r.a.createElement("label",{htmlFor:"phoneNumber"},"Numer telefonu"),r.a.createElement("input",{type:"text",id:"phoneNumber",onChange:this.handleChange,value:this.state.phoneNumber})),r.a.createElement("div",{className:"input-field"},r.a.createElement("button",{className:"btn red lighten-1 z-depth-0",disabled:this.disableSend()},"ZAPISZ")))))):r.a.createElement("div",{className:"container center"},r.a.createElement("p",null,"\u0141adowanie...")):r.a.createElement(T.a,{to:"/"})}}]),t}(n.Component);Be.getDerivedStateFromProps=function(e,t){return e.users&&""===t.clientName?Object(b.a)({},e.users[e.match.params.uid]):t};var Ke=Object(z.d)(Object(g.b)(function(e){return{auth:e.firebase.auth,users:e.firestore.data.users}},function(e){return{updateUser:function(t,a){return e(function(e,t){return function(a,n,r){r.getFirebase,(0,r.getFirestore)().collection("users").doc(e).update(Object(b.a)({},t)).then(function(){a({type:"UPDATE_USER",uid:e})}).catch(function(e){a({type:"UPDATE_USER_ERROR",err:e})})}}(t,a))}}}),Object(A.firestoreConnect)(function(e){return[{collection:"users",doc:e.auth.uid}]}))(Be),Ge={width:"99%",minHeight:50,padding:10,border:"1px dashed pink",borderRadius:"10px"},Ve={width:"99%",minHeight:100,padding:10,border:"1px dashed grey",borderRadius:"10px"},Je=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleDelete=function(){a.props.deleteSettlement(a.props.settlementId),a.props.history.push("/dashboard")},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.auth;if(!e.uid)return r.a.createElement(T.a,{to:"/"});var t=this.props.settlement,a=this.props.users;if(t&&a&&e){var n=Object.values(t.tax),l=a[e.uid].isAcc?r.a.createElement(ie,{handleDelete:this.handleDelete}):null;return r.a.createElement("div",{className:"container section project-details"},r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},t.title),r.a.createElement("p",null,a[t.clientId].clientName," Podatek Za Okres ",t.issuePeriod,":"),r.a.createElement("div",{className:"tax-box",style:Ve},n.map(function(e){return r.a.createElement("p",{key:e[1]},e)})),r.a.createElement("p",{style:{marginTop:25}},"Komentarze:"),r.a.createElement("div",{className:"comments-box",style:Ge},r.a.createElement("p",null,t.comment)),r.a.createElement("div",{className:"bottom-btn-container",style:{display:"flex"}},l)),r.a.createElement("div",{className:"card-action grey lighten-4 grey-text"},r.a.createElement("div",null,"Utworzono: ",_()(t.createdAt.toDate()).calendar()))))}return r.a.createElement("div",{className:"container center"},r.a.createElement("p",null,"\u0141adowanie..."))}}]),t}(n.Component),He=Object(z.d)(Object(g.b)(function(e,t){var a=t.match.params.id,n=e.firestore.data.settlements;return{settlement:n?n[a]:null,users:e.firestore.data.users,settlementId:t.match.params.id,auth:e.firebase.auth}},function(e){return{deleteSettlement:function(t){return e(function(e){return function(t,a,n){n.getFirebase,(0,n.getFirestore)().collection("settlements").doc(e).delete().then(function(){t({type:"DELETE_SETTLEMENT",settlementId:e})}).catch(function(e){t({type:"DELETE_SETTLEMENT_ERROR",err:e})})}}(t))}}}),Object(A.firestoreConnect)(function(e){return[{collection:"settlements"},{collection:"users"}]}))(Je),qe=function(e){var t=e.client;return r.a.createElement("div",{className:"container section"},r.a.createElement("div",{className:"card z-depth-0"},r.a.createElement("div",{className:"card-content"},r.a.createElement("span",{className:"card-title"},t.clientName),r.a.createElement("p",{className:"grey-text"},"Adres: ",r.a.createElement("span",{className:"grey-text text-darken-2"},t.adress)),r.a.createElement("p",{className:"grey-text"},"Forma prawna: ",r.a.createElement("span",{className:"grey-text text-darken-2"},t.legalForm)),r.a.createElement("p",{className:"grey-text"},"NIP: ",r.a.createElement("span",{className:"grey-text text-darken-2"},t.nip)),r.a.createElement("p",{className:"grey-text"},"REGON: ",r.a.createElement("span",{className:"grey-text text-darken-2"},t.regon)),r.a.createElement("p",{className:"grey-text"},"Telefon: ",r.a.createElement("span",{className:"grey-text text-darken-2"},t.phoneNumber)),r.a.createElement("p",{className:"grey-text"},"Email: ",r.a.createElement("span",{className:"grey-text text-darken-2"},t.email)),r.a.createElement("p",{className:"grey-text"},"ID: ",r.a.createElement("span",{className:"grey-text text-darken-2"},t.id)))))},Qe={height:"100%",overflow:"auto"},Xe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleClientPick=function(e,t){e.preventDefault(),a.setState(Object(b.a)({},t,{clientPicked:!0}))},a.state={clientPicked:!1,adress:"",clientName:"",id:"",initials:"",isAcc:!1,legalForm:"",nip:"",phoneNumber:"",regon:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.clients;return r.a.createElement("div",{style:Qe},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s5",style:{marginTop:15}},t.map(function(t){return r.a.createElement("a",{key:t.id,href:"#",className:"black-text",onClick:function(a){return e.handleClientPick(a,t)}},r.a.createElement("div",{className:"card client-list-item"},r.a.createElement("div",{className:"card-content",style:{margin:1,padding:2}},r.a.createElement("span",{className:"card-title"},t.clientName.substring(0,16)+"..."),r.a.createElement("p",{className:"grey-text text-darken-1"},"ID: ",t.id))))})),r.a.createElement("div",{className:"col s6"},this.state.clientPicked?r.a.createElement(qe,{client:this.state}):r.a.createElement("p",{style:{textAlign:"center",color:"red"}},"WYBIERZ KLIENTA"))))}}]),t}(n.Component),$e=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.users;return e.auth.uid?t?r.a.createElement("div",{className:"container"},r.a.createElement(Xe,{clients:t})):r.a.createElement("div",{className:"container"},r.a.createElement("p",null,"\u0141adowanie...")):r.a.createElement(T.a,{to:"/"})}}]),t}(n.Component),et=Object(z.d)(Object(g.b)(function(e){return{users:e.firestore.ordered.users,auth:e.firebase.auth}}),Object(A.firestoreConnect)(function(e){return[{collection:"users",where:["isAcc","==",!1]}]}))($e),tt=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(F,null),r.a.createElement(h.a,null,r.a.createElement(p.a,{path:"/newdocument",component:Ce}),r.a.createElement(p.a,{path:"/project/update/:id",component:_e}),r.a.createElement(p.a,{path:"/newsettlement",component:we}),r.a.createElement(p.a,{path:"/settlement/:id",component:He}),r.a.createElement(p.a,{path:"/dashboard",component:J}),r.a.createElement(p.a,{path:"/accpanel",component:ae}),r.a.createElement(p.a,{path:"/project/:id",component:fe}),r.a.createElement(p.a,{path:"/accountdetails/:uid",component:We}),r.a.createElement(p.a,{path:"/update/accountdetails/:uid",component:Ke}),r.a.createElement(p.a,{path:"/signin",component:R}),r.a.createElement(p.a,{path:"/signup",component:C}),r.a.createElement(p.a,{path:"/clients",component:et}),r.a.createElement(p.a,{exact:!0,path:"/",component:De}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var at={authError:null},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return console.log("login error"),Object(b.a)({},e,{authError:"Login failed"});case"LOGIN_SUCCESS":return console.log("login success"),Object(b.a)({},e,{authError:null});case"SIGNOUT_SUCCESS":return console.log("signout success"),e;case"SIGNUP_SUCCESS":return console.log("signup success"),Object(b.a)({},e,{authError:null});case"SIGNUP_ERROR":return console.log("signup error"),Object(b.a)({},e,{authError:t.err.message});case"DELETE_USER":return console.log("user deleted"),Object(b.a)({},e,{authError:null});case"DELETE_USER_ERROR":return console.log("error",t.err),Object(b.a)({},e,{authError:t.err.message});case"UPDATE_USER":return console.log("user "+t.uid+" data was updated"),e;case"UPDATE_USER_ERROR":return console.log("error",t.err),e;default:return e}},rt={invoices:[]},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_INVOICE":return console.log("created invoice",t.invoice.docType),e;case"CREATE_INVOICE_ERROR":return console.log("create project error: ",t.err),e;case"DELETE_INVOICE":return console.log("invoice "+t.invoiceId+" successfully deleted"),e;case"DELETE_INVOICE_ERROR":return console.log("delete invoice error",t.err),e;case"UPDATE_INVOICE":return console.log("document"+t.invoiceId+" succesfully updated"),e;case"UPDATE_INVOICE_ERROR":return console.log("udate invoice error",t.err),e;default:return e}},it={settlements:[]},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_SETTLEMENT":return console.log("created invoice",t.settlement.title),e;case"CREATE_SETTLEMENT_ERROR":return console.log("create project error: ",t.err),e;case"DELETE_SETTLEMENT":return console.log("invoice "+t+" successfully deleted"),e;case"DELETE_SETTLEMENT_ERROR":return console.log("delete invoice error",t.err),e;default:return e}},ct=a(96),ot=Object(z.c)({auth:nt,invoice:lt,settlement:st,firestore:ct.firestoreReducer,firebase:A.firebaseReducer}),ut=a(326),dt=a(139),mt=a.n(dt);a(756),a(757);mt.a.initializeApp({apiKey:"AIzaSyD7QGJm-izPNS0nc9-EdECa5KjCdDyjETw",authDomain:"e-accountant-b98af.firebaseapp.com",databaseURL:"https://e-accountant-b98af.firebaseio.com",projectId:"e-accountant-b98af",storageBucket:"e-accountant-b98af.appspot.com",messagingSenderId:"78591416232"}),mt.a.firestore().settings({timestampsInSnapshots:!0});var ht=mt.a,pt=Object(z.e)(ot,Object(z.d)(Object(z.a)(ut.a.withExtraArgument({getFirebase:A.getFirebase,getFirestore:ct.getFirestore})),Object(ct.reduxFirestore)(ht),Object(A.reactReduxFirebase)(ht,{useFirestoreForProfile:!0,userProfile:"users",attachAuthIsReady:!0})));pt.firebaseAuthIsReady.then(function(){i.a.render(r.a.createElement(g.a,{store:pt},r.a.createElement(tt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})})}},[[424,2,1]]]);
//# sourceMappingURL=main.93840eaf.chunk.js.map